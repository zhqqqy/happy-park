<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Node.js 简单学习 | 柚柚乐园</title>
<meta name="keywords" content="NodeJS, 前端">
<meta name="description" content="在平常工作学习中经常会用到一些开源的工具，其中一些工具就是需要你安装 Node.js，然后使用 npm install xx 来安装。之前一直以为 Node.js 就是为了解决js的包">
<meta name="author" content="Geeko">
<link rel="canonical" href="https://happy-park.vercel.app/zh/posts/tech/node.js%E7%AE%80%E5%8D%95%E5%AD%A6%E4%B9%A0/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css" integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z&#43;V9&#43;cO1A=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://happy-park.vercel.app/img/logo.gif">
<link rel="icon" type="image/png" sizes="16x16" href="https://happy-park.vercel.app/img/logo.gif">
<link rel="icon" type="image/png" sizes="32x32" href="https://happy-park.vercel.app/img/logo.gif">
<link rel="apple-touch-icon" href="https://happy-park.vercel.app/logo.gif">
<link rel="mask-icon" href="https://happy-park.vercel.app/logo.gif">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://happy-park.vercel.app/zh/posts/tech/node.js%E7%AE%80%E5%8D%95%E5%AD%A6%E4%B9%A0/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Node.js 简单学习" />
<meta property="og:description" content="在平常工作学习中经常会用到一些开源的工具，其中一些工具就是需要你安装 Node.js，然后使用 npm install xx 来安装。之前一直以为 Node.js 就是为了解决js的包" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://happy-park.vercel.app/zh/posts/tech/node.js%E7%AE%80%E5%8D%95%E5%AD%A6%E4%B9%A0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-24T16:26:04+08:00" />
<meta property="article:modified_time" content="2024-01-24T16:26:04+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Node.js 简单学习"/>
<meta name="twitter:description" content="在平常工作学习中经常会用到一些开源的工具，其中一些工具就是需要你安装 Node.js，然后使用 npm install xx 来安装。之前一直以为 Node.js 就是为了解决js的包"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "📚文章",
      "item": "https://happy-park.vercel.app/zh/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "👨🏻‍💻技术",
      "item": "https://happy-park.vercel.app/zh/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Node.js 简单学习",
      "item": "https://happy-park.vercel.app/zh/posts/tech/node.js%E7%AE%80%E5%8D%95%E5%AD%A6%E4%B9%A0/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Node.js 简单学习",
  "name": "Node.js 简单学习",
  "description": "在平常工作学习中经常会用到一些开源的工具，其中一些工具就是需要你安装 Node.js，然后使用 npm install xx 来安装。之前一直以为 Node.js 就是为了解决js的包",
  "keywords": [
    "NodeJS", "前端"
  ],
  "articleBody": "在平常工作学习中经常会用到一些开源的工具，其中一些工具就是需要你安装 Node.js，然后使用 npm install xx 来安装。之前一直以为 Node.js 就是为了解决js的包管理功能。最近去深入学习了下发现错大😅。这里记录下自己的理解\nNode.js 和 chrome 我们都知道 JavaScript t其实是一门高级编程语言，高级编程语言想要在机器上执行，就需要被编译成字解码，不同的浏览器就会实现不同的 Javascript 解释器。比如 Chrome 就是用的 V8引擎，火狐用的就是 TraceMonkey 引擎。\nNode.js 是一个基于Chrome V8引擎的JavaScript运行时环境，它提供了许多与操作系统交互的功能。\n为什么浏览器不能实现上述功能，需要专门搞一个 Node.js 来做这件事？\n但是想到这里的时候就会有一点奇怪。 那我明明已经装了Chrome, 其实我电脑上已经装了 V8 引擎了，那为啥要 Node.js 来运行呢？直接写代码让浏览器解释执行代码来进行操作不就好了吗？\n其实浏览器的设计初衷是为了提供安全的网络浏览体验，而不是为本地文件操作和系统调用提供功能。出于安全性的考虑，浏览器限制了对用户计算机的访问权限，防止恶意代码滥用用户的文件和系统资源。而且浏览器也没有提供对应的对操作系统进行系统调用的 api\nNode.js使用了一种称为”libuv”的库，它允许JavaScript程序访问文件系统、网络和系统调用等功能。相比于浏览器，Node.js在设计上更加注重服务器端和命令行应用程序的开发，提供了更多底层操作的能力。\n因此，为了实现读写本地文件和执行系统调用等功能，需要使用像Node.js这样的运行时环境，它在安全性和功能性上做了相应的权衡，以满足开发者对于更底层操作的需求。\n安装Node.js 安装nodejs是最简单的了，打开Node.js官网选择对应操作系统的包，一步步安装就好了。\n安装完成后，打开终端，输入 node -v ​。查看一下版本号，有输出就是安装成功了。\n​ ​\nhelloworld 安装完成之后就可以像 python 一样在命令行中断来执行简单代码逻辑的，如下图：\n​ ​\n当然也可以将代码保存在 js 文件中，直接用 node 执行 js 文件。\n1 2 3 const a=\"hello \" const b=\"world\" console.log(a+b) 将上述代码保存为 main.js 并，在终端运行 noed main.js\n​ ​\n模块化 模块化其实就是： 将 JavaScript 程序拆分为可按需导入的单独模块。比如在 nodejs中我们常常需要创建一些运行大量 JavaScript 脚本的复杂程序,这个时候将功能拆解，解耦才能更好的维护，同时提高代码的可充用性。\n下面用两个例子来解释一下，\nA.js:\n1 2 3 function getData() { console.log(\"Function getData in A.js\"); } B.js:\n1 2 3 function getData() { console.log(\"Function getData in B.js\"); } 现在，如果我们将A.js和B.js同时引入页面中，然后调用getData函数会发生命名冲突。index.html:\n1 2 3 4 5 http://A.js http://B.js \u003cscript\u003e getData(); // 将调用哪个getData函数？ \u003c/script\u003e 在这种情况下，由于两个文件都定义了相同的函数名，调用getData函数时会发生冲突。为了解决这个问题，我们可以使用模块化的方式来封装代码，并将作用域限定在模块内部。\nA.js模块化重写：\n1 2 3 4 5 6 7 8 9 var A = (function() { function getData() { console.log(\"Function getData in A.js\"); } return { getData: getData }; })(); B.js模块化重写：\n1 2 3 4 5 6 7 8 9 var B = (function() { function getData() { console.log(\"Function getData in B.js\"); } return { getData: getData }; })(); 现在，我们可以在引入模块后，通过模块的命名来调用相应的函数。\nindex.html:\n1 2 3 4 5 6 http://A.js http://B.js \u003cscript\u003e A.getData(); // Output: Function getData in A.js B.getData(); // Output: Function getData in B.js \u003c/script\u003e Node.JS 模块化 模块是Node.js 应用程序的基本组成部分，文件和模块是一一对应的。换言之，一个 Node.js 文件就是一个模块，这个文件可能是JavaScript 代码、JSON 或者编译过的C/C++ 扩展。\n模块化使用 假设我们有两个模块：math.js和app.js。math.js模块包含了一些数学操作的函数，降 add 和subtract函数封装到module.exports​对象里面， 而app.js模块将通过 require('./math.js');​ 来生成一个 math​ 对象,通过math​使用math.js​模块中的函数。\nmath.js\n1 2 3 4 5 6 7 8 9 10 function add(a, b) { return a + b; } function subtract(a, b) { return a - b; } module.exports = { add, subtract }; 在上面的示例中，我们定义了add​和subtract​函数，并使用module.exports​将它们导出为一个对象，以便其他模块可以引用它们。\n接下来，创建一个名为app.js​的文件，它将使用math.js​模块中的函数。\napp.js:\n1 2 3 4 const math = require('./math.js'); console.log(math.add(5, 3)); // 输出: 8 console.log(math.subtract(10, 7)); // 输出: 3 在app.js​文件中，我们使用require​函数引入了math.js​模块，并将其赋值给math​变量。现在，我们可以使用math​对象来调用add​和subtract​函数，并打印它们的结果。\n包管理NPM 既然有了模块化，我们就可以把自己认为写的比较好的，比较通用的模块分享出去，提供给别人使用，js 上的这个平台就是 https://www.npmjs.com 。我们可以通过 npm (安装 NodeJS的时候就已经安装好了)将该平台上我们需要的包拉下来，这样我们就可以在项目中直接使用别人写好的代码，而不需要全部由自己来实现了。\nnpm使用 初始化 我们可以在本地创建一个文件夹 npm-demo ,进入该文件夹下，执行 npm init\n​ ​\n执行中会提示输入以下参数\npackage name: 包名，不可以有中文 version: (1.0.0)：设置当前包的版本 description: 给这个包一个描述 entry point: (index.js)：这个包的入口 test command: 测试命令 git repository: git 仓库 keywords: 关键字 author: 作者 license: 开源证书 可以一路回车，就选用默认的参数。上面执行完成后会生成一个 package.json 文件. 该文件的内容就是根据上面填写的信息生成的。\n安装一个依赖包 安装依赖包通过 npm install 命令来实现，我们可以在刚刚的文件夹下安装一个 d3 模块\n1 npm install d3 此时查看 package.json 文件就会发现多了一点内容：\n​ ​\n当然这种安装方式默认安装的是最新的版本，如果我们想要指定的版本就通过在想要的包后面加上 @xxx 的方式来指定版本号，xxx 就是想要的版本\n1 npm install d3@7.6.1 执行完成后会发现echarts版本号变成了7.6.1了\n上手使用 在上面的项目中创建一个 src 文件夹，并在文件夹中创一个 index.js\n1 2 3 4 import * as d3 from 'd3'; let p = d3.select('body').selectAll('p'); p.text('hello world'); 在 npm-demo 目录下创建一个 public 文件夹，并在该文件夹下床架 index.html ：\n如果这个时候直接打开 index.html ，浏览器控制台会报错，提示存在跨域的问题：\n1 2 3 4 5 \u003cbody\u003e \u003cp\u003e\u003c/p\u003e \u003cp\u003e\u003c/p\u003e http://../src/index.js \u003c/body\u003e index.html:1 Access to script at ‘file:///root/work/npm-demo/src/index.js’ from origin ‘null’ has been blocked by CORS policy:\n这个时候可以试着用 vscode 打开该项目并在 vscode 中安装 live Server 插件\n​ ​\n安装完成后，点击 vscode 下方工具栏中的 Go Live :\n​ ​\n他会自动启动一个服务，并访问当前的 html 页面。\n但是我们发现浏览器还是没有任何内容，打开控制台看报错是\nUncaught TypeError: Failed to resolve module specifier “echarts”. Relative references must start with either “/”, “./”, or “../”.\n这是因为，我们一开始在 index.js 中导入 d3 的方式是 ‘bare import’ (裸导入)\n1 import * as d3 from 'd3'; 因为 Web 浏览器无法自行解析裸导入, 因此要解决这个方法的话，要么是使用支持裸导入的服务器web-dev-server，或者用 webpack 打包工具将项目打包后打开。\n安装 web-dev-server 在 node-demo 目录下执行以下命令安装 web/dev-server\n1 npm install --save-dev @web/dev-server 安装完成之后，编辑 package.config\n在 scripts 中加入一个键值对\n1 \"start\": \"web-dev-server --node-resolve --app-index public/index.html --open\" ​ ​\n保存后，在终端执行\n1 npm run start ​ ​\n执行完成后就会打开浏览器，我们就能看到内容了：\n​ ​\n",
  "wordCount" : "2801",
  "inLanguage": "zh",
  "datePublished": "2024-01-24T16:26:04+08:00",
  "dateModified": "2024-01-24T16:26:04+08:00",
  "author":[{
    "@type": "Person",
    "name": "Geeko"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://happy-park.vercel.app/zh/posts/tech/node.js%E7%AE%80%E5%8D%95%E5%AD%A6%E4%B9%A0/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "柚柚乐园",
    "logo": {
      "@type": "ImageObject",
      "url": "https://happy-park.vercel.app/img/logo.gif"
    }
  }
}
</script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>


</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://happy-park.vercel.app/zh/" accesskey="h" title="柚柚乐园 (Alt + H)">柚柚乐园</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://happy-park.vercel.app/zh/search" title="🔍搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍搜索</span>
                </a>
            </li>
            <li>
                <a href="https://happy-park.vercel.app/zh/" title="🏠主页">
                    <span>🏠主页</span>
                </a>
            </li>
            <li>
                <a href="https://happy-park.vercel.app/zh/posts" title="📚文章">
                    <span>📚文章</span>
                </a>
            </li>
            <li>
                <a href="https://happy-park.vercel.app/zh/archives" title="⏱时间轴">
                    <span>⏱时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://happy-park.vercel.app/zh/tags" title="🔖标签">
                    <span>🔖标签</span>
                </a>
            </li>
            <li>
                <a href="https://happy-park.vercel.app/zh/about" title="🙋🏻‍♂️关于">
                    <span>🙋🏻‍♂️关于</span>
                </a>
            </li>
            <li>
                <a href="https://happy-park.vercel.app/zh/links" title="🤝友链">
                    <span>🤝友链</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://happy-park.vercel.app/zh/">主页</a>&nbsp;»&nbsp;<a href="https://happy-park.vercel.app/zh/posts/">📚文章</a>&nbsp;»&nbsp;<a href="https://happy-park.vercel.app/zh/posts/tech/">👨🏻‍💻技术</a></div>
    <h1 class="post-title entry-hint-parent">
      Node.js 简单学习
    </h1>
    <div class="post-meta"><span title='2024-01-24 16:26:04 +0800 CST'>2024-01-24</span>&nbsp;·&nbsp;6 分钟&nbsp;·&nbsp;Geeko

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#nodejs-%e5%92%8c-chrome" aria-label="Node.js 和 chrome">Node.js 和 chrome</a></li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85nodejs" aria-label="安装Node.js">安装Node.js</a><ul>
                        
                <li>
                    <a href="#helloworld" aria-label="helloworld">helloworld</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%a8%a1%e5%9d%97%e5%8c%96" aria-label="模块化">模块化</a><ul>
                        
                <li>
                    <a href="#nodejs-%e6%a8%a1%e5%9d%97%e5%8c%96" aria-label="Node.JS 模块化">Node.JS 模块化</a><ul>
                        
                <li>
                    <a href="#%e6%a8%a1%e5%9d%97%e5%8c%96%e4%bd%bf%e7%94%a8" aria-label="模块化使用">模块化使用</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%8c%85%e7%ae%a1%e7%90%86npm" aria-label="包管理NPM">包管理NPM</a><ul>
                        
                <li>
                    <a href="#npm%e4%bd%bf%e7%94%a8" aria-label="npm使用">npm使用</a><ul>
                        
                <li>
                    <a href="#%e5%88%9d%e5%a7%8b%e5%8c%96" aria-label="初始化">初始化</a></li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85%e4%b8%80%e4%b8%aa%e4%be%9d%e8%b5%96%e5%8c%85" aria-label="安装一个依赖包">安装一个依赖包</a></li>
                <li>
                    <a href="#%e4%b8%8a%e6%89%8b%e4%bd%bf%e7%94%a8" aria-label="上手使用">上手使用</a><ul>
                        
                <li>
                    <a href="#%e5%ae%89%e8%a3%85-web-dev-server" aria-label="安装 web-dev-server">安装 web-dev-server</a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>在平常工作学习中经常会用到一些开源的工具，其中一些工具就是需要你安装 Node.js，然后使用 npm install xx 来安装。之前一直以为 Node.js 就是为了解决js的包管理功能。最近去深入学习了下发现错大😅。这里记录下自己的理解</p>
<h2 id="nodejs-和-chrome">Node.js 和 chrome<a hidden class="anchor" aria-hidden="true" href="#nodejs-和-chrome">#</a></h2>
<p>我们都知道 JavaScript t其实是一门高级编程语言，高级编程语言想要在机器上执行，就需要被编译成字解码，不同的浏览器就会实现不同的 Javascript 解释器。比如 Chrome 就是用的 V8引擎，火狐用的就是 TraceMonkey 引擎。</p>
<p>Node.js 是一个基于Chrome V8引擎的JavaScript运行时环境，它提供了许多与操作系统交互的功能。</p>
<p><strong>为什么浏览器不能实现上述功能，需要专门搞一个 Node</strong>.js <strong>来做这件事？</strong></p>
<p>但是想到这里的时候就会有一点奇怪。 那我明明已经装了Chrome, 其实我电脑上已经装了 V8 引擎了，那为啥要 Node.js 来运行呢？直接写代码让浏览器解释执行代码来进行操作不就好了吗？</p>
<p>其实浏览器的设计初衷是为了提供安全的网络浏览体验，而不是为本地文件操作和系统调用提供功能。出于安全性的考虑，浏览器限制了对用户计算机的访问权限，防止恶意代码滥用用户的文件和系统资源。而且浏览器也没有提供对应的对操作系统进行系统调用的 api</p>
<p>Node.js使用了一种称为”libuv”的库，它允许JavaScript程序访问文件系统、网络和系统调用等功能。相比于浏览器，Node.js在设计上更加注重服务器端和命令行应用程序的开发，提供了更多底层操作的能力。<br>
因此，为了实现读写本地文件和执行系统调用等功能，需要使用像Node.js这样的运行时环境，它在安全性和功能性上做了相应的权衡，以满足开发者对于更底层操作的需求。</p>
<h2 id="安装nodejs">安装Node.js<a hidden class="anchor" aria-hidden="true" href="#安装nodejs">#</a></h2>
<p>安装nodejs是最简单的了，打开<a href="https://nodejs.org/en">Node.js官网选择</a>对应操作系统的包，一步步安装就好了。</p>
<p>安装完成后，打开终端，输入 <code>node -v&lt;span&gt; &lt;/span&gt;</code>​。查看一下版本号，有输出就是安装成功了。</p>
<p>​

<div class="post-img-view">
<a data-fancybox="gallery" href="/front/NodeJS/image-20240125150217-4zxnbn7.png">
<img src="/front/NodeJS/image-20240125150217-4zxnbn7.png" alt="image"  />
</a>
</div>

​</p>
<h3 id="helloworld">helloworld<a hidden class="anchor" aria-hidden="true" href="#helloworld">#</a></h3>
<p>安装完成之后就可以像 python 一样在命令行中断来执行简单代码逻辑的，如下图：</p>
<p>​

<div class="post-img-view">
<a data-fancybox="gallery" href="/front/NodeJS/image-20240125150223-daq9snn.png">
<img src="/front/NodeJS/image-20240125150223-daq9snn.png" alt="image"  />
</a>
</div>

​</p>
<p>当然也可以将代码保存在 js 文件中，直接用 node 执行 js 文件。</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> a<span style="color:#555">=</span><span style="color:#c30">&#34;hello &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> b<span style="color:#555">=</span><span style="color:#c30">&#34;world&#34;</span>
</span></span><span style="display:flex;"><span>console.log(a<span style="color:#555">+</span>b)
</span></span></code></pre></td></tr></table>
</div>
</div><p>将上述代码保存为 main.js 并，在终端运行 noed main.js</p>
<p>​

<div class="post-img-view">
<a data-fancybox="gallery" href="/front/NodeJS/image-20240125150236-son6p2v.png">
<img src="/front/NodeJS/image-20240125150236-son6p2v.png" alt="image"  />
</a>
</div>

​</p>
<h2 id="模块化">模块化<a hidden class="anchor" aria-hidden="true" href="#模块化">#</a></h2>
<p>模块化其实就是： <strong>将 JavaScript 程序拆分为可按需导入的单独模块</strong>。比如在 nodejs中我们常常需要创建一些运行大量 JavaScript 脚本的复杂程序,这个时候将功能拆解，解耦才能更好的维护，同时提高代码的可充用性。</p>
<p>下面用两个例子来解释一下，</p>
<p>A.js:</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">function</span> getData() {
</span></span><span style="display:flex;"><span>  console.log(<span style="color:#c30">&#34;Function getData in A.js&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>B.js:</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">function</span> getData() {
</span></span><span style="display:flex;"><span>  console.log(<span style="color:#c30">&#34;Function getData in B.js&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>现在，如果我们将A.js和B.js同时引入页面中，然后调用getData函数会发生命名冲突。index.html:</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>http<span style="color:#555">:</span><span style="color:#09f;font-style:italic">//A.js
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>http<span style="color:#555">:</span><span style="color:#09f;font-style:italic">//B.js
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#555">&lt;</span>script<span style="color:#555">&gt;</span>
</span></span><span style="display:flex;"><span>  getData(); <span style="color:#09f;font-style:italic">// 将调用哪个getData函数？
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#555">&lt;</span><span style="color:#a00;background-color:#faa">/script&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>在这种情况下，由于两个文件都定义了相同的函数名，调用getData函数时会发生冲突。为了解决这个问题，我们可以使用模块化的方式来封装代码，并将作用域限定在模块内部。</p>
<p>A.js模块化重写：</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">var</span> A <span style="color:#555">=</span> (<span style="color:#069;font-weight:bold">function</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#069;font-weight:bold">function</span> getData() {
</span></span><span style="display:flex;"><span>    console.log(<span style="color:#c30">&#34;Function getData in A.js&#34;</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  <span style="color:#069;font-weight:bold">return</span> {
</span></span><span style="display:flex;"><span>    getData<span style="color:#555">:</span> getData
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>})();
</span></span></code></pre></td></tr></table>
</div>
</div><p>B.js模块化重写：</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">var</span> B <span style="color:#555">=</span> (<span style="color:#069;font-weight:bold">function</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#069;font-weight:bold">function</span> getData() {
</span></span><span style="display:flex;"><span>    console.log(<span style="color:#c30">&#34;Function getData in B.js&#34;</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  <span style="color:#069;font-weight:bold">return</span> {
</span></span><span style="display:flex;"><span>    getData<span style="color:#555">:</span> getData
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>})();
</span></span></code></pre></td></tr></table>
</div>
</div><p>现在，我们可以在引入模块后，通过模块的命名来调用相应的函数。</p>
<p>index.html:</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>http://A.js
</span></span><span style="display:flex;"><span>http://B.js
</span></span><span style="display:flex;"><span>&lt;<span style="color:#309;font-weight:bold">script</span>&gt;
</span></span><span style="display:flex;"><span>  A.getData(); <span style="color:#09f;font-style:italic">// Output: Function getData in A.js
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  B.getData(); <span style="color:#09f;font-style:italic">// Output: Function getData in B.js
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>&lt;/<span style="color:#309;font-weight:bold">script</span>&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="nodejs-模块化">Node.JS 模块化<a hidden class="anchor" aria-hidden="true" href="#nodejs-模块化">#</a></h3>
<p>模块是Node.js 应用程序的基本组成部分，文件和模块是一一对应的。换言之，一个 Node.js 文件就是一个模块，这个文件可能是JavaScript 代码、JSON 或者编译过的C/C++ 扩展。</p>
<h4 id="模块化使用">模块化使用<a hidden class="anchor" aria-hidden="true" href="#模块化使用">#</a></h4>
<p>假设我们有两个模块：math.js和app.js。math.js模块包含了一些数学操作的函数，降 add 和subtract函数封装到<code>module.exports</code>​对象里面， 而app.js模块将通过 <code>require('./math.js');</code>​ 来生成一个 <code>math</code>​ 对象,通过<code>math</code>​使用<code>math.js</code>​模块中的函数。</p>
<p>math.js</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">function</span> add(a, b) {
</span></span><span style="display:flex;"><span>  <span style="color:#069;font-weight:bold">return</span> a <span style="color:#555">+</span> b;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">function</span> subtract(a, b) {
</span></span><span style="display:flex;"><span>  <span style="color:#069;font-weight:bold">return</span> a <span style="color:#555">-</span> b;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>module.exports <span style="color:#555">=</span> {
</span></span><span style="display:flex;"><span>  add,
</span></span><span style="display:flex;"><span>  subtract
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></td></tr></table>
</div>
</div><p>在上面的示例中，我们定义了<code>add</code>​和<code>subtract</code>​函数，并使用<code>module.exports</code>​将它们导出为一个对象，以便其他模块可以引用它们。</p>
<p>接下来，创建一个名为<code>app.js</code>​的文件，它将使用<code>math.js</code>​模块中的函数。</p>
<p>app.js:</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> math <span style="color:#555">=</span> require(<span style="color:#c30">&#39;./math.js&#39;</span>);
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>console.log(math.add(<span style="color:#f60">5</span>, <span style="color:#f60">3</span>)); <span style="color:#09f;font-style:italic">// 输出: 8
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>console.log(math.subtract(<span style="color:#f60">10</span>, <span style="color:#f60">7</span>)); <span style="color:#09f;font-style:italic">// 输出: 3
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>在<code>app.js</code>​文件中，我们使用<code>require</code>​函数引入了<code>math.js</code>​模块，并将其赋值给<code>math</code>​变量。现在，我们可以使用<code>math</code>​对象来调用<code>add</code>​和<code>subtract</code>​函数，并打印它们的结果。</p>
<h2 id="包管理npm">包管理NPM<a hidden class="anchor" aria-hidden="true" href="#包管理npm">#</a></h2>
<p>既然有了模块化，我们就可以把自己认为写的比较好的，比较通用的模块分享出去，提供给别人使用，js 上的这个平台就是 <a href="https://www.npmjs.com/">https://www.npmjs.com</a> 。我们可以通过 <strong>npm</strong> (安装 NodeJS的时候就已经安装好了)将该平台上我们需要的包拉下来，这样我们就可以在项目中直接使用别人写好的代码，而不需要全部由自己来实现了。</p>
<h3 id="npm使用">npm使用<a hidden class="anchor" aria-hidden="true" href="#npm使用">#</a></h3>
<h4 id="初始化">初始化<a hidden class="anchor" aria-hidden="true" href="#初始化">#</a></h4>
<p>我们可以在本地创建一个文件夹 npm-demo ,进入该文件夹下，执行 npm init</p>
<p>​

<div class="post-img-view">
<a data-fancybox="gallery" href="/front/NodeJS/image-20240125150853-buc2qd9.png">
<img src="/front/NodeJS/image-20240125150853-buc2qd9.png" alt="image"  />
</a>
</div>

​</p>
<p>执行中会提示输入以下参数</p>
<ul>
<li>package name: 包名，不可以有中文</li>
<li>version: (1.0.0)：设置当前包的版本</li>
<li>description: 给这个包一个描述</li>
<li>entry point: (index.js)：这个包的入口</li>
<li>test command: 测试命令</li>
<li>git repository: git 仓库</li>
<li>keywords: 关键字</li>
<li>author: 作者</li>
<li>license: 开源证书</li>
</ul>
<p>可以一路回车，就选用默认的参数。上面执行完成后会生成一个 package.json 文件. 该文件的内容就是根据上面填写的信息生成的。</p>
<h4 id="安装一个依赖包">安装一个依赖包<a hidden class="anchor" aria-hidden="true" href="#安装一个依赖包">#</a></h4>
<p>安装依赖包通过 npm install 命令来实现，我们可以在刚刚的文件夹下安装一个 d3 模块</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm install d3
</span></span></code></pre></td></tr></table>
</div>
</div><p>此时查看 package.json 文件就会发现多了一点内容：</p>
<p>​

<div class="post-img-view">
<a data-fancybox="gallery" href="/front/NodeJS/image-20240125150256-cjhmlup.png">
<img src="/front/NodeJS/image-20240125150256-cjhmlup.png" alt="image"  />
</a>
</div>

​</p>
<p>当然这种安装方式默认安装的是最新的版本，如果我们想要指定的版本就通过在想要的包后面加上 @xxx 的方式来指定版本号，xxx 就是想要的版本</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm install d3@7.6.1
</span></span></code></pre></td></tr></table>
</div>
</div><p>执行完成后会发现echarts版本号变成了7.6.1了</p>
<h4 id="上手使用">上手使用<a hidden class="anchor" aria-hidden="true" href="#上手使用">#</a></h4>
<p>在上面的项目中创建一个 src 文件夹，并在文件夹中创一个 index.js</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">import</span> <span style="color:#555">*</span> as d3 from <span style="color:#c30">&#39;d3&#39;</span>;
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">let</span> p <span style="color:#555">=</span> d3.select(<span style="color:#c30">&#39;body&#39;</span>).selectAll(<span style="color:#c30">&#39;p&#39;</span>);
</span></span><span style="display:flex;"><span>p.text(<span style="color:#c30">&#39;hello world&#39;</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><p>在 npm-demo 目录下创建一个 public 文件夹，并在该文件夹下床架 index.html ：</p>
<p>如果这个时候直接打开 index.html ，浏览器控制台会报错，提示存在<strong>跨域</strong>的问题：</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#309;font-weight:bold">body</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#309;font-weight:bold">p</span>&gt;&lt;/<span style="color:#309;font-weight:bold">p</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#309;font-weight:bold">p</span>&gt;&lt;/<span style="color:#309;font-weight:bold">p</span>&gt;
</span></span><span style="display:flex;"><span>    http://../src/index.js
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#309;font-weight:bold">body</span>&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>index.html:1 Access to script at ‘file:///root/work/npm-demo/src/index.js’ from origin ‘null’ has been blocked by CORS policy:</p>
</blockquote>
<p>这个时候可以试着用 vscode 打开该项目并在 vscode 中安装 live Server 插件</p>
<p>​

<div class="post-img-view">
<a data-fancybox="gallery" href="/front/NodeJS/image-20240125150304-skszyck.png">
<img src="/front/NodeJS/image-20240125150304-skszyck.png" alt="image"  />
</a>
</div>

​</p>
<p>安装完成后，点击 vscode 下方工具栏中的 Go Live :</p>
<p>​

<div class="post-img-view">
<a data-fancybox="gallery" href="/front/NodeJS/image-20240125150314-tdz9wfi.png">
<img src="/front/NodeJS/image-20240125150314-tdz9wfi.png" alt="image"  />
</a>
</div>

​</p>
<p>他会自动启动一个服务，并访问当前的 html 页面。</p>
<p>但是我们发现浏览器还是没有任何内容，打开控制台看报错是</p>
<blockquote>
<p>Uncaught TypeError: Failed to resolve module specifier “echarts”. Relative references must start with either “/”, “./”, or “../”.</p>
</blockquote>
<p>这是因为，我们一开始在 index.js 中导入 d3 的方式是 <strong>‘bare import’</strong> (裸导入)</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">import</span> <span style="color:#555">*</span> as d3 from <span style="color:#c30">&#39;d3&#39;</span>;
</span></span></code></pre></td></tr></table>
</div>
</div><p>因为 Web 浏览器无法自行解析裸导入, 因此要解决这个方法的话，要么是使用支持裸导入的服务器<a href="https://modern-web.dev/docs/dev-server/overview/">web-dev-server</a>，或者用 webpack 打包工具将项目打包后打开。</p>
<h5 id="安装-web-dev-server">安装 web-dev-server<a hidden class="anchor" aria-hidden="true" href="#安装-web-dev-server">#</a></h5>
<p>在 node-demo 目录下执行以下命令安装 web/dev-server</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>npm install --save-dev @web/dev-server
</span></span></code></pre></td></tr></table>
</div>
</div><p>安装完成之后，编辑 package.config</p>
<p>在 scripts 中加入一个键值对</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&#34;start&#34;: &#34;web-dev-server  --node-resolve --app-index public/index.html --open&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p>​

<div class="post-img-view">
<a data-fancybox="gallery" href="/front/NodeJS/image-20240125150329-y7w2g3q.png">
<img src="/front/NodeJS/image-20240125150329-y7w2g3q.png" alt="image"  />
</a>
</div>

​</p>
<p>保存后，在终端执行</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>npm run start
</span></span></code></pre></td></tr></table>
</div>
</div><p>​

<div class="post-img-view">
<a data-fancybox="gallery" href="/front/NodeJS/image-20240125150336-tkpxd8t.png">
<img src="/front/NodeJS/image-20240125150336-tkpxd8t.png" alt="image"  />
</a>
</div>

​</p>
<p>执行完成后就会打开浏览器，我们就能看到内容了：</p>
<p>​

<div class="post-img-view">
<a data-fancybox="gallery" href="/front/NodeJS/image-20240125150349-16y438f.png">
<img src="/front/NodeJS/image-20240125150349-16y438f.png" alt="image"  />
</a>
</div>

​</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://happy-park.vercel.app/zh/tags/nodejs/">NodeJS</a></li>
      <li><a href="https://happy-park.vercel.app/zh/tags/%E5%89%8D%E7%AB%AF/">前端</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://happy-park.vercel.app/zh/posts/tech/%E7%A8%80%E7%96%8F%E6%96%87%E4%BB%B6/">
    <span class="title">« 上一页</span>
    <br>
    <span>稀疏文件</span>
  </a>
  <a class="next" href="https://happy-park.vercel.app/zh/posts/tech/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%88%86%E9%A1%B5%E5%88%86%E8%A1%A8/">
    <span class="title">下一页 »</span>
    <br>
    <span>操作系统分页分表</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://happy-park.vercel.app/zh/">柚柚乐园</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
